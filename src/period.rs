/*
    Created by Zoltan Kovari, 2024.

    Licensed under the Apache License, Version 2.0
    http://www.apache.org/licenses/LICENSE-2.0
    (see LICENSE.txt)


    Module to parse ISO 8601 time period format

    Known limitations:
    - Although the standard includes further date fields like month and year, we are not supporting this yet, the day field is the largest.
    - Although it is not prohibited to use values exceeding their carry over points (e.g. "PT36H"), we are not supporting this except for the day field.
    - We are not supporting fractional values.


    Excerpt from the YouTube API documentation:

    "For example, for a video that is at least one minute long and less than one hour long, the duration is in the format PT#M#S, in which the letters PT
    indicate that the value specifies a period of time, and the letters M and S refer to length in minutes and seconds, respectively. The # characters
    preceding the M and S letters are both integers that specify the number of minutes (or seconds) of the video. For example, a value of PT15M33S indicates
    that the video is 15 minutes and 33 seconds long.

    If the video is at least one hour long, the duration is in the format PT#H#M#S, in which the # preceding the letter H specifies the length of the video in
    hours and all of the other details are the same as described above. If the video is at least one day long, the letters P and T are separated, and the
    value's format is P#DT#H#M#S. Please refer to the ISO 8601 specification for complete details."

    (Used under CC BY 4.0, source:
    https://developers.google.com/youtube/v3/docs/videos#resource
    section "Properties" > "contentDetails.duration")

    See also:
    https://en.wikipedia.org/wiki/ISO_8601#Durations
*/

use std::str::FromStr;
use chrono::TimeDelta;


pub fn parse_delta(period: &str) -> Option<TimeDelta> {
    let mut sec = 0;
    let mut min = 0;
    let mut hrs = 0;
    let mut days = 0;
    let mut time_set = false;
    let mut time_marked = false;
    let mut date_set = false;
    let mut period_marked = false;
    let mut current = None;
    let mut value = String::new();

    for c in period.chars().rev() {
        match Element::new(c) {
            Some(e) => {
                match e {
                    Element::Time => time_marked = true,
                    Element::Period => period_marked = true,
                    _ => ()
                }
                match current {
                    None => current = Some(e),
                    Some(cur) => {
                        if e<cur {
                            let pointer = match cur {
                                Element::Second => {
                                    time_set = true;
                                    Some(&mut sec)
                                },
                                Element::Minute => {
                                    time_set = true;
                                    Some(&mut min)
                                },
                                Element::Hour => {
                                    time_set = true;
                                    Some(&mut hrs)
                                },
                                Element::Day => {
                                    date_set = true;
                                    Some(&mut days)
                                },
                                _ => None
                            };
                            match pointer {
                                Some(p) => match i64::from_str(&value) {
                                    Ok(v) => *p = v,
                                    Err(_) => return None
                                },
                                None => if !value.is_empty() {
                                    return None;
                                }
                            }
                            value = String::new();
                            current = Some(e);
                        } else {
                            return None;
                        }
                    }
                }
            },
            None => match current {
                Some(cur) => match cur {
                    Element::Time | Element::Period => return None,
                    _ => if c.is_ascii_digit() {
                        value.insert(0, c)
                    } else {
                        return None;
                    }
                },
                None => return None
            }
        }
    }

    if sec >= 60 ||
        min >= 60 ||
        hrs >= 24 ||
        time_set != time_marked ||
        (!time_set && !date_set) ||
        !period_marked
    {
        None
    } else {
        Some(TimeDelta::seconds(((days*24+hrs)*60+min)*60+sec))
    }
}


#[derive(Copy, Clone, Debug, PartialEq, PartialOrd)]
enum Element {
    Period,
    Day,
    Time,
    Hour,
    Minute,
    Second,
}
impl Element {
    fn new(c: char) -> Option<Element> {
        match c {
            'P' => Some(Element::Period),
            'D' => Some(Element::Day),
            'T' => Some(Element::Time),
            'H' => Some(Element::Hour),
            'M' => Some(Element::Minute),
            'S' => Some(Element::Second),
            _ => None
        }
    }
}


#[cfg(test)]
mod period_test {
    use super::*;


    #[test]
    fn parse_test() {
        let tests = [
            ("", None),

            /*base set: acceptable letters (for reference only, as these are included in the extended set)
            ("PD", None),
            ("PT", None),
            ("PTS", None),
            ("PTM", None),
            ("PTH", None),
            ("PTMS", None),
            ("PTHM", None),
            ("PTHS", None),
            ("PTHMS", None),
            ("PDTS", None),
            ("PDTM", None),
            ("PDTH", None),
            ("PDTMS", None),
            ("PDTHS", None),
            ("PDTHM", None),
            ("PDTHMS", None),
            */

            //extended set: acceptable letters with missings, duplicates and incorrect ordering
            ("P", None),
            ("S", None),
            ("PT", None),
            ("PD", None),
            ("PS", None),
            ("DT", None),
            ("TS", None),
            ("PTS", None),
            ("PTM", None),
            ("PTH", None),
            ("PTD", None),
            ("PST", None),
            ("PDT", None),
            ("PTMS", None),
            ("PTSM", None),
            ("PTHM", None),
            ("PTMH", None),
            ("PTHS", None),
            ("PTSH", None),
            ("PTSS", None),
            ("PTMM", None),
            ("PTHH", None),
            ("PTHMS", None),
            ("PTHSM", None),
            ("PTMHS", None),
            ("PTMSH", None),
            ("PTSHM", None),
            ("PTSMH", None),
            ("PTHHS", None),
            ("PTHHM", None),
            ("PTHMM", None),
            ("PTMMS", None),
            ("PTHSS", None),
            ("PTMSS", None),
            ("PDTS", None),
            ("PDTM", None),
            ("PDTH", None),
            ("PDTD", None),
            ("PSTD", None),
            ("PSTH", None),
            ("PSTS", None),
            ("PDTMS", None),
            ("PDTSM", None),
            ("PDTHS", None),
            ("PDTSH", None),
            ("PDTHM", None),
            ("PDTMH", None),
            ("PDTHH", None),
            ("PDTDH", None),
            ("PDTHD", None),
            ("PSTDH", None),
            ("PSTHD", None),
            ("PSTHM", None),
            ("PDTHMS", None),
            ("PDTHSM", None),
            ("PDTMHS", None),
            ("PDTMSH", None),
            ("PDTSHM", None),
            ("PDTSMH", None),
            ("PDTDHM", None),
            ("PDTHHS", None),
            ("PSTDHM", None),
            ("PSTHMS", None),
            ("PDTHMSS", None),
            ("PDTHMSH", None),
            ("PDTHMSD", None),
            ("PDTSHMS", None),
            ("PDTHHMS", None),
            ("PDTDHMS", None),
            ("PDDTHMS", None),
            ("PDSTHMS", None),
            ("PSDTHMS", None),

            //extended set with one 0 at every possible place
            ("0", None),
            ("0P", None),
            ("P0", None),
            ("0S", None),
            ("S0", None),
            ("0PT", None),
            ("P0T", None),
            ("PT0", None),
            ("0PD", None),
            ("P0D", Some(TimeDelta::zero())),
            ("PD0", None),
            ("0PS", None),
            ("P0S", None),
            ("PS0", None),
            ("0DT", None),
            ("D0T", None),
            ("DT0", None),
            ("0TS", None),
            ("T0S", None),
            ("TS0", None),
            ("0PTS", None),
            ("P0TS", None),
            ("PT0S", Some(TimeDelta::zero())),
            ("PTS0", None),
            ("0PTM", None),
            ("P0TM", None),
            ("PT0M", Some(TimeDelta::zero())),
            ("PTM0", None),
            ("0PTH", None),
            ("P0TH", None),
            ("PT0H", Some(TimeDelta::zero())),
            ("PTH0", None),
            ("0PTD", None),
            ("P0TD", None),
            ("PT0D", None),
            ("PTD0", None),
            ("0PST", None),
            ("P0ST", None),
            ("PS0T", None),
            ("PST0", None),
            ("0PDT", None),
            ("P0DT", None),
            ("PD0T", None),
            ("PDT0", None),
            ("0PTMS", None),
            ("P0TMS", None),
            ("PT0MS", None),
            ("PTM0S", None),
            ("PTMS0", None),
            ("0PTSM", None),
            ("P0TSM", None),
            ("PT0SM", None),
            ("PTS0M", None),
            ("PTSM0", None),
            ("0PTHM", None),
            ("P0THM", None),
            ("PT0HM", None),
            ("PTH0M", None),
            ("PTHM0", None),
            ("0PTMH", None),
            ("P0TMH", None),
            ("PT0MH", None),
            ("PTM0H", None),
            ("PTMH0", None),
            ("0PTHS", None),
            ("P0THS", None),
            ("PT0HS", None),
            ("PTH0S", None),
            ("PTHS0", None),
            ("0PTSH", None),
            ("P0TSH", None),
            ("PT0SH", None),
            ("PTS0H", None),
            ("PTSH0", None),
            ("0PTSS", None),
            ("P0TSS", None),
            ("PT0SS", None),
            ("PTS0S", None),
            ("PTSS0", None),
            ("0PTMM", None),
            ("P0TMM", None),
            ("PT0MM", None),
            ("PTM0M", None),
            ("PTMM0", None),
            ("0PTHH", None),
            ("P0THH", None),
            ("PT0HH", None),
            ("PTH0H", None),
            ("PTHH0", None),
            ("0PTHMS", None),
            ("P0THMS", None),
            ("PT0HMS", None),
            ("PTH0MS", None),
            ("PTHM0S", None),
            ("PTHMS0", None),
            ("0PTHSM", None),
            ("P0THSM", None),
            ("PT0HSM", None),
            ("PTH0SM", None),
            ("PTHS0M", None),
            ("PTHSM0", None),
            ("0PTMHS", None),
            ("P0TMHS", None),
            ("PT0MHS", None),
            ("PTM0HS", None),
            ("PTMH0S", None),
            ("PTMHS0", None),
            ("0PTMSH", None),
            ("P0TMSH", None),
            ("PT0MSH", None),
            ("PTM0SH", None),
            ("PTMS0H", None),
            ("PTMSH0", None),
            ("0PTSHM", None),
            ("P0TSHM", None),
            ("PT0SHM", None),
            ("PTS0HM", None),
            ("PTSH0M", None),
            ("PTSHM0", None),
            ("0PTSMH", None),
            ("P0TSMH", None),
            ("PT0SMH", None),
            ("PTS0MH", None),
            ("PTSM0H", None),
            ("PTSMH0", None),
            ("0PTHHS", None),
            ("P0THHS", None),
            ("PT0HHS", None),
            ("PTH0HS", None),
            ("PTHH0S", None),
            ("PTHHS0", None),
            ("0PTHHM", None),
            ("P0THHM", None),
            ("PT0HHM", None),
            ("PTH0HM", None),
            ("PTHH0M", None),
            ("PTHHM0", None),
            ("0PTHMM", None),
            ("P0THMM", None),
            ("PT0HMM", None),
            ("PTH0MM", None),
            ("PTHM0M", None),
            ("PTHMM0", None),
            ("0PTMMS", None),
            ("P0TMMS", None),
            ("PT0MMS", None),
            ("PTM0MS", None),
            ("PTMM0S", None),
            ("PTMMS0", None),
            ("0PTHSS", None),
            ("P0THSS", None),
            ("PT0HSS", None),
            ("PTH0SS", None),
            ("PTHS0S", None),
            ("PTHSS0", None),
            ("0PTMSS", None),
            ("P0TMSS", None),
            ("PT0MSS", None),
            ("PTM0SS", None),
            ("PTMS0S", None),
            ("PTMSS0", None),
            ("0PDTS", None),
            ("P0DTS", None),
            ("PD0TS", None),
            ("PDT0S", None),
            ("PDTS0", None),
            ("0PDTM", None),
            ("P0DTM", None),
            ("PD0TM", None),
            ("PDT0M", None),
            ("PDTM0", None),
            ("0PDTH", None),
            ("P0DTH", None),
            ("PD0TH", None),
            ("PDT0H", None),
            ("PDTH0", None),
            ("0PDTD", None),
            ("P0DTD", None),
            ("PD0TD", None),
            ("PDT0D", None),
            ("PDTD0", None),
            ("0PSTD", None),
            ("P0STD", None),
            ("PS0TD", None),
            ("PST0D", None),
            ("PSTD0", None),
            ("0PSTH", None),
            ("P0STH", None),
            ("PS0TH", None),
            ("PST0H", None),
            ("PSTH0", None),
            ("0PSTS", None),
            ("P0STS", None),
            ("PS0TS", None),
            ("PST0S", None),
            ("PSTS0", None),
            ("0PDTMS", None),
            ("P0DTMS", None),
            ("PD0TMS", None),
            ("PDT0MS", None),
            ("PDTM0S", None),
            ("PDTMS0", None),
            ("0PDTSM", None),
            ("P0DTSM", None),
            ("PD0TSM", None),
            ("PDT0SM", None),
            ("PDTS0M", None),
            ("PDTSM0", None),
            ("0PDTHS", None),
            ("P0DTHS", None),
            ("PD0THS", None),
            ("PDT0HS", None),
            ("PDTH0S", None),
            ("PDTHS0", None),
            ("0PDTSH", None),
            ("P0DTSH", None),
            ("PD0TSH", None),
            ("PDT0SH", None),
            ("PDTS0H", None),
            ("PDTSH0", None),
            ("0PDTHM", None),
            ("P0DTHM", None),
            ("PD0THM", None),
            ("PDT0HM", None),
            ("PDTH0M", None),
            ("PDTHM0", None),
            ("0PDTMH", None),
            ("P0DTMH", None),
            ("PD0TMH", None),
            ("PDT0MH", None),
            ("PDTM0H", None),
            ("PDTMH0", None),
            ("0PDTHH", None),
            ("P0DTHH", None),
            ("PD0THH", None),
            ("PDT0HH", None),
            ("PDTH0H", None),
            ("PDTHH0", None),
            ("0PDTDH", None),
            ("P0DTDH", None),
            ("PD0TDH", None),
            ("PDT0DH", None),
            ("PDTD0H", None),
            ("PDTDH0", None),
            ("0PDTHD", None),
            ("P0DTHD", None),
            ("PD0THD", None),
            ("PDT0HD", None),
            ("PDTH0D", None),
            ("PDTHD0", None),
            ("0PSTDH", None),
            ("P0STDH", None),
            ("PS0TDH", None),
            ("PST0DH", None),
            ("PSTD0H", None),
            ("PSTDH0", None),
            ("0PSTHD", None),
            ("P0STHD", None),
            ("PS0THD", None),
            ("PST0HD", None),
            ("PSTH0D", None),
            ("PSTHD0", None),
            ("0PSTHM", None),
            ("P0STHM", None),
            ("PS0THM", None),
            ("PST0HM", None),
            ("PSTH0M", None),
            ("PSTHM0", None),
            ("0PDTHMS", None),
            ("P0DTHMS", None),
            ("PD0THMS", None),
            ("PDT0HMS", None),
            ("PDTH0MS", None),
            ("PDTHM0S", None),
            ("PDTHMS0", None),
            ("0PDTHSM", None),
            ("P0DTHSM", None),
            ("PD0THSM", None),
            ("PDT0HSM", None),
            ("PDTH0SM", None),
            ("PDTHS0M", None),
            ("PDTHSM0", None),
            ("0PDTMHS", None),
            ("P0DTMHS", None),
            ("PD0TMHS", None),
            ("PDT0MHS", None),
            ("PDTM0HS", None),
            ("PDTMH0S", None),
            ("PDTMHS0", None),
            ("0PDTMSH", None),
            ("P0DTMSH", None),
            ("PD0TMSH", None),
            ("PDT0MSH", None),
            ("PDTM0SH", None),
            ("PDTMS0H", None),
            ("PDTMSH0", None),
            ("0PDTSHM", None),
            ("P0DTSHM", None),
            ("PD0TSHM", None),
            ("PDT0SHM", None),
            ("PDTS0HM", None),
            ("PDTSH0M", None),
            ("PDTSHM0", None),
            ("0PDTSMH", None),
            ("P0DTSMH", None),
            ("PD0TSMH", None),
            ("PDT0SMH", None),
            ("PDTS0MH", None),
            ("PDTSM0H", None),
            ("PDTSMH0", None),
            ("0PDTDHM", None),
            ("P0DTDHM", None),
            ("PD0TDHM", None),
            ("PDT0DHM", None),
            ("PDTD0HM", None),
            ("PDTDH0M", None),
            ("PDTDHM0", None),
            ("0PDTHHS", None),
            ("P0DTHHS", None),
            ("PD0THHS", None),
            ("PDT0HHS", None),
            ("PDTH0HS", None),
            ("PDTHH0S", None),
            ("PDTHHS0", None),
            ("0PSTDHM", None),
            ("P0STDHM", None),
            ("PS0TDHM", None),
            ("PST0DHM", None),
            ("PSTD0HM", None),
            ("PSTDH0M", None),
            ("PSTDHM0", None),
            ("0PSTHMS", None),
            ("P0STHMS", None),
            ("PS0THMS", None),
            ("PST0HMS", None),
            ("PSTH0MS", None),
            ("PSTHM0S", None),
            ("PSTHMS0", None),
            ("0PDTHMSS", None),
            ("P0DTHMSS", None),
            ("PD0THMSS", None),
            ("PDT0HMSS", None),
            ("PDTH0MSS", None),
            ("PDTHM0SS", None),
            ("PDTHMS0S", None),
            ("PDTHMSS0", None),
            ("0PDTHMSH", None),
            ("P0DTHMSH", None),
            ("PD0THMSH", None),
            ("PDT0HMSH", None),
            ("PDTH0MSH", None),
            ("PDTHM0SH", None),
            ("PDTHMS0H", None),
            ("PDTHMSH0", None),
            ("0PDTHMSD", None),
            ("P0DTHMSD", None),
            ("PD0THMSD", None),
            ("PDT0HMSD", None),
            ("PDTH0MSD", None),
            ("PDTHM0SD", None),
            ("PDTHMS0D", None),
            ("PDTHMSD0", None),
            ("0PDTSHMS", None),
            ("P0DTSHMS", None),
            ("PD0TSHMS", None),
            ("PDT0SHMS", None),
            ("PDTS0HMS", None),
            ("PDTSH0MS", None),
            ("PDTSHM0S", None),
            ("PDTSHMS0", None),
            ("0PDTHHMS", None),
            ("P0DTHHMS", None),
            ("PD0THHMS", None),
            ("PDT0HHMS", None),
            ("PDTH0HMS", None),
            ("PDTHH0MS", None),
            ("PDTHHM0S", None),
            ("PDTHHMS0", None),
            ("0PDTDHMS", None),
            ("P0DTDHMS", None),
            ("PD0TDHMS", None),
            ("PDT0DHMS", None),
            ("PDTD0HMS", None),
            ("PDTDH0MS", None),
            ("PDTDHM0S", None),
            ("PDTDHMS0", None),
            ("0PDDTHMS", None),
            ("P0DDTHMS", None),
            ("PD0DTHMS", None),
            ("PDD0THMS", None),
            ("PDDT0HMS", None),
            ("PDDTH0MS", None),
            ("PDDTHM0S", None),
            ("PDDTHMS0", None),
            ("0PDSTHMS", None),
            ("P0DSTHMS", None),
            ("PD0STHMS", None),
            ("PDS0THMS", None),
            ("PDST0HMS", None),
            ("PDSTH0MS", None),
            ("PDSTHM0S", None),
            ("PDSTHMS0", None),
            ("0PSDTHMS", None),
            ("P0SDTHMS", None),
            ("PS0DTHMS", None),
            ("PSD0THMS", None),
            ("PSDT0HMS", None),
            ("PSDTH0MS", None),
            ("PSDTHM0S", None),
            ("PSDTHMS0", None),

            //extended set with one 1 at every possible place
            ("1", None),
            ("1P", None),
            ("P1", None),
            ("1S", None),
            ("S1", None),
            ("1PT", None),
            ("P1T", None),
            ("PT1", None),
            ("1PD", None),
            ("P1D", Some(TimeDelta::days(1))),
            ("PD1", None),
            ("1PS", None),
            ("P1S", None),
            ("PS1", None),
            ("1DT", None),
            ("D1T", None),
            ("DT1", None),
            ("1TS", None),
            ("T1S", None),
            ("TS1", None),
            ("1PTS", None),
            ("P1TS", None),
            ("PT1S", Some(TimeDelta::seconds(1))),
            ("PTS1", None),
            ("1PTM", None),
            ("P1TM", None),
            ("PT1M", Some(TimeDelta::minutes(1))),
            ("PTM1", None),
            ("1PTH", None),
            ("P1TH", None),
            ("PT1H", Some(TimeDelta::hours(1))),
            ("PTH1", None),
            ("1PTD", None),
            ("P1TD", None),
            ("PT1D", None),
            ("PTD1", None),
            ("1PST", None),
            ("P1ST", None),
            ("PS1T", None),
            ("PST1", None),
            ("1PDT", None),
            ("P1DT", None),
            ("PD1T", None),
            ("PDT1", None),
            ("1PTMS", None),
            ("P1TMS", None),
            ("PT1MS", None),
            ("PTM1S", None),
            ("PTMS1", None),
            ("1PTSM", None),
            ("P1TSM", None),
            ("PT1SM", None),
            ("PTS1M", None),
            ("PTSM1", None),
            ("1PTHM", None),
            ("P1THM", None),
            ("PT1HM", None),
            ("PTH1M", None),
            ("PTHM1", None),
            ("1PTMH", None),
            ("P1TMH", None),
            ("PT1MH", None),
            ("PTM1H", None),
            ("PTMH1", None),
            ("1PTHS", None),
            ("P1THS", None),
            ("PT1HS", None),
            ("PTH1S", None),
            ("PTHS1", None),
            ("1PTSH", None),
            ("P1TSH", None),
            ("PT1SH", None),
            ("PTS1H", None),
            ("PTSH1", None),
            ("1PTSS", None),
            ("P1TSS", None),
            ("PT1SS", None),
            ("PTS1S", None),
            ("PTSS1", None),
            ("1PTMM", None),
            ("P1TMM", None),
            ("PT1MM", None),
            ("PTM1M", None),
            ("PTMM1", None),
            ("1PTHH", None),
            ("P1THH", None),
            ("PT1HH", None),
            ("PTH1H", None),
            ("PTHH1", None),
            ("1PTHMS", None),
            ("P1THMS", None),
            ("PT1HMS", None),
            ("PTH1MS", None),
            ("PTHM1S", None),
            ("PTHMS1", None),
            ("1PTHSM", None),
            ("P1THSM", None),
            ("PT1HSM", None),
            ("PTH1SM", None),
            ("PTHS1M", None),
            ("PTHSM1", None),
            ("1PTMHS", None),
            ("P1TMHS", None),
            ("PT1MHS", None),
            ("PTM1HS", None),
            ("PTMH1S", None),
            ("PTMHS1", None),
            ("1PTMSH", None),
            ("P1TMSH", None),
            ("PT1MSH", None),
            ("PTM1SH", None),
            ("PTMS1H", None),
            ("PTMSH1", None),
            ("1PTSHM", None),
            ("P1TSHM", None),
            ("PT1SHM", None),
            ("PTS1HM", None),
            ("PTSH1M", None),
            ("PTSHM1", None),
            ("1PTSMH", None),
            ("P1TSMH", None),
            ("PT1SMH", None),
            ("PTS1MH", None),
            ("PTSM1H", None),
            ("PTSMH1", None),
            ("1PTHHS", None),
            ("P1THHS", None),
            ("PT1HHS", None),
            ("PTH1HS", None),
            ("PTHH1S", None),
            ("PTHHS1", None),
            ("1PTHHM", None),
            ("P1THHM", None),
            ("PT1HHM", None),
            ("PTH1HM", None),
            ("PTHH1M", None),
            ("PTHHM1", None),
            ("1PTHMM", None),
            ("P1THMM", None),
            ("PT1HMM", None),
            ("PTH1MM", None),
            ("PTHM1M", None),
            ("PTHMM1", None),
            ("1PTMMS", None),
            ("P1TMMS", None),
            ("PT1MMS", None),
            ("PTM1MS", None),
            ("PTMM1S", None),
            ("PTMMS1", None),
            ("1PTHSS", None),
            ("P1THSS", None),
            ("PT1HSS", None),
            ("PTH1SS", None),
            ("PTHS1S", None),
            ("PTHSS1", None),
            ("1PTMSS", None),
            ("P1TMSS", None),
            ("PT1MSS", None),
            ("PTM1SS", None),
            ("PTMS1S", None),
            ("PTMSS1", None),
            ("1PDTS", None),
            ("P1DTS", None),
            ("PD1TS", None),
            ("PDT1S", None),
            ("PDTS1", None),
            ("1PDTM", None),
            ("P1DTM", None),
            ("PD1TM", None),
            ("PDT1M", None),
            ("PDTM1", None),
            ("1PDTH", None),
            ("P1DTH", None),
            ("PD1TH", None),
            ("PDT1H", None),
            ("PDTH1", None),
            ("1PDTD", None),
            ("P1DTD", None),
            ("PD1TD", None),
            ("PDT1D", None),
            ("PDTD1", None),
            ("1PSTD", None),
            ("P1STD", None),
            ("PS1TD", None),
            ("PST1D", None),
            ("PSTD1", None),
            ("1PSTH", None),
            ("P1STH", None),
            ("PS1TH", None),
            ("PST1H", None),
            ("PSTH1", None),
            ("1PSTS", None),
            ("P1STS", None),
            ("PS1TS", None),
            ("PST1S", None),
            ("PSTS1", None),
            ("1PDTMS", None),
            ("P1DTMS", None),
            ("PD1TMS", None),
            ("PDT1MS", None),
            ("PDTM1S", None),
            ("PDTMS1", None),
            ("1PDTSM", None),
            ("P1DTSM", None),
            ("PD1TSM", None),
            ("PDT1SM", None),
            ("PDTS1M", None),
            ("PDTSM1", None),
            ("1PDTHS", None),
            ("P1DTHS", None),
            ("PD1THS", None),
            ("PDT1HS", None),
            ("PDTH1S", None),
            ("PDTHS1", None),
            ("1PDTSH", None),
            ("P1DTSH", None),
            ("PD1TSH", None),
            ("PDT1SH", None),
            ("PDTS1H", None),
            ("PDTSH1", None),
            ("1PDTHM", None),
            ("P1DTHM", None),
            ("PD1THM", None),
            ("PDT1HM", None),
            ("PDTH1M", None),
            ("PDTHM1", None),
            ("1PDTMH", None),
            ("P1DTMH", None),
            ("PD1TMH", None),
            ("PDT1MH", None),
            ("PDTM1H", None),
            ("PDTMH1", None),
            ("1PDTHH", None),
            ("P1DTHH", None),
            ("PD1THH", None),
            ("PDT1HH", None),
            ("PDTH1H", None),
            ("PDTHH1", None),
            ("1PDTDH", None),
            ("P1DTDH", None),
            ("PD1TDH", None),
            ("PDT1DH", None),
            ("PDTD1H", None),
            ("PDTDH1", None),
            ("1PDTHD", None),
            ("P1DTHD", None),
            ("PD1THD", None),
            ("PDT1HD", None),
            ("PDTH1D", None),
            ("PDTHD1", None),
            ("1PSTDH", None),
            ("P1STDH", None),
            ("PS1TDH", None),
            ("PST1DH", None),
            ("PSTD1H", None),
            ("PSTDH1", None),
            ("1PSTHD", None),
            ("P1STHD", None),
            ("PS1THD", None),
            ("PST1HD", None),
            ("PSTH1D", None),
            ("PSTHD1", None),
            ("1PSTHM", None),
            ("P1STHM", None),
            ("PS1THM", None),
            ("PST1HM", None),
            ("PSTH1M", None),
            ("PSTHM1", None),
            ("1PDTHMS", None),
            ("P1DTHMS", None),
            ("PD1THMS", None),
            ("PDT1HMS", None),
            ("PDTH1MS", None),
            ("PDTHM1S", None),
            ("PDTHMS1", None),
            ("1PDTHSM", None),
            ("P1DTHSM", None),
            ("PD1THSM", None),
            ("PDT1HSM", None),
            ("PDTH1SM", None),
            ("PDTHS1M", None),
            ("PDTHSM1", None),
            ("1PDTMHS", None),
            ("P1DTMHS", None),
            ("PD1TMHS", None),
            ("PDT1MHS", None),
            ("PDTM1HS", None),
            ("PDTMH1S", None),
            ("PDTMHS1", None),
            ("1PDTMSH", None),
            ("P1DTMSH", None),
            ("PD1TMSH", None),
            ("PDT1MSH", None),
            ("PDTM1SH", None),
            ("PDTMS1H", None),
            ("PDTMSH1", None),
            ("1PDTSHM", None),
            ("P1DTSHM", None),
            ("PD1TSHM", None),
            ("PDT1SHM", None),
            ("PDTS1HM", None),
            ("PDTSH1M", None),
            ("PDTSHM1", None),
            ("1PDTSMH", None),
            ("P1DTSMH", None),
            ("PD1TSMH", None),
            ("PDT1SMH", None),
            ("PDTS1MH", None),
            ("PDTSM1H", None),
            ("PDTSMH1", None),
            ("1PDTDHM", None),
            ("P1DTDHM", None),
            ("PD1TDHM", None),
            ("PDT1DHM", None),
            ("PDTD1HM", None),
            ("PDTDH1M", None),
            ("PDTDHM1", None),
            ("1PDTHHS", None),
            ("P1DTHHS", None),
            ("PD1THHS", None),
            ("PDT1HHS", None),
            ("PDTH1HS", None),
            ("PDTHH1S", None),
            ("PDTHHS1", None),
            ("1PSTDHM", None),
            ("P1STDHM", None),
            ("PS1TDHM", None),
            ("PST1DHM", None),
            ("PSTD1HM", None),
            ("PSTDH1M", None),
            ("PSTDHM1", None),
            ("1PSTHMS", None),
            ("P1STHMS", None),
            ("PS1THMS", None),
            ("PST1HMS", None),
            ("PSTH1MS", None),
            ("PSTHM1S", None),
            ("PSTHMS1", None),
            ("1PDTHMSS", None),
            ("P1DTHMSS", None),
            ("PD1THMSS", None),
            ("PDT1HMSS", None),
            ("PDTH1MSS", None),
            ("PDTHM1SS", None),
            ("PDTHMS1S", None),
            ("PDTHMSS1", None),
            ("1PDTHMSH", None),
            ("P1DTHMSH", None),
            ("PD1THMSH", None),
            ("PDT1HMSH", None),
            ("PDTH1MSH", None),
            ("PDTHM1SH", None),
            ("PDTHMS1H", None),
            ("PDTHMSH1", None),
            ("1PDTHMSD", None),
            ("P1DTHMSD", None),
            ("PD1THMSD", None),
            ("PDT1HMSD", None),
            ("PDTH1MSD", None),
            ("PDTHM1SD", None),
            ("PDTHMS1D", None),
            ("PDTHMSD1", None),
            ("1PDTSHMS", None),
            ("P1DTSHMS", None),
            ("PD1TSHMS", None),
            ("PDT1SHMS", None),
            ("PDTS1HMS", None),
            ("PDTSH1MS", None),
            ("PDTSHM1S", None),
            ("PDTSHMS1", None),
            ("1PDTHHMS", None),
            ("P1DTHHMS", None),
            ("PD1THHMS", None),
            ("PDT1HHMS", None),
            ("PDTH1HMS", None),
            ("PDTHH1MS", None),
            ("PDTHHM1S", None),
            ("PDTHHMS1", None),
            ("1PDTDHMS", None),
            ("P1DTDHMS", None),
            ("PD1TDHMS", None),
            ("PDT1DHMS", None),
            ("PDTD1HMS", None),
            ("PDTDH1MS", None),
            ("PDTDHM1S", None),
            ("PDTDHMS1", None),
            ("1PDDTHMS", None),
            ("P1DDTHMS", None),
            ("PD1DTHMS", None),
            ("PDD1THMS", None),
            ("PDDT1HMS", None),
            ("PDDTH1MS", None),
            ("PDDTHM1S", None),
            ("PDDTHMS1", None),
            ("1PDSTHMS", None),
            ("P1DSTHMS", None),
            ("PD1STHMS", None),
            ("PDS1THMS", None),
            ("PDST1HMS", None),
            ("PDSTH1MS", None),
            ("PDSTHM1S", None),
            ("PDSTHMS1", None),
            ("1PSDTHMS", None),
            ("P1SDTHMS", None),
            ("PS1DTHMS", None),
            ("PSD1THMS", None),
            ("PSDT1HMS", None),
            ("PSDTH1MS", None),
            ("PSDTHM1S", None),
            ("PSDTHMS1", None),

            //base set with 0 and 1
            ("01PD", None),
            ("0P1D", None),
            ("0PD1", None),
            ("P01D", Some(TimeDelta::days(1))),
            ("P0D1", None),
            ("PD01", None),
            ("01PT", None),
            ("0P1T", None),
            ("0PT1", None),
            ("P01T", None),
            ("P0T1", None),
            ("PT01", None),
            ("01PTS", None),
            ("0P1TS", None),
            ("0PT1S", None),
            ("0PTS1", None),
            ("P01TS", None),
            ("P0T1S", None),
            ("P0TS1", None),
            ("PT01S", Some(TimeDelta::seconds(1))),
            ("PT0S1", None),
            ("PTS01", None),
            ("01PTM", None),
            ("0P1TM", None),
            ("0PT1M", None),
            ("0PTM1", None),
            ("P01TM", None),
            ("P0T1M", None),
            ("P0TM1", None),
            ("PT01M", Some(TimeDelta::minutes(1))),
            ("PT0M1", None),
            ("PTM01", None),
            ("01PTH", None),
            ("0P1TH", None),
            ("0PT1H", None),
            ("0PTH1", None),
            ("P01TH", None),
            ("P0T1H", None),
            ("P0TH1", None),
            ("PT01H", Some(TimeDelta::hours(1))),
            ("PT0H1", None),
            ("PTH01", None),
            ("01PDT", None),
            ("0P1DT", None),
            ("0PD1T", None),
            ("0PDT1", None),
            ("P01DT", None),
            ("P0D1T", None),
            ("P0DT1", None),
            ("PD01T", None),
            ("PD0T1", None),
            ("PDT01", None),
            ("01PTMS", None),
            ("0P1TMS", None),
            ("0PT1MS", None),
            ("0PTM1S", None),
            ("0PTMS1", None),
            ("P01TMS", None),
            ("P0T1MS", None),
            ("P0TM1S", None),
            ("P0TMS1", None),
            ("PT01MS", None),
            ("PT0M1S", Some(TimeDelta::seconds(1))),
            ("PT0MS1", None),
            ("PTM01S", None),
            ("PTM0S1", None),
            ("PTMS01", None),
            ("01PTHM", None),
            ("0P1THM", None),
            ("0PT1HM", None),
            ("0PTH1M", None),
            ("0PTHM1", None),
            ("P01THM", None),
            ("P0T1HM", None),
            ("P0TH1M", None),
            ("P0THM1", None),
            ("PT01HM", None),
            ("PT0H1M", Some(TimeDelta::minutes(1))),
            ("PT0HM1", None),
            ("PTH01M", None),
            ("PTH0M1", None),
            ("PTHM01", None),
            ("01PTHS", None),
            ("0P1THS", None),
            ("0PT1HS", None),
            ("0PTH1S", None),
            ("0PTHS1", None),
            ("P01THS", None),
            ("P0T1HS", None),
            ("P0TH1S", None),
            ("P0THS1", None),
            ("PT01HS", None),
            ("PT0H1S", Some(TimeDelta::seconds(1))),
            ("PT0HS1", None),
            ("PTH01S", None),
            ("PTH0S1", None),
            ("PTHS01", None),
            ("01PTHMS", None),
            ("0P1THMS", None),
            ("0PT1HMS", None),
            ("0PTH1MS", None),
            ("0PTHM1S", None),
            ("0PTHMS1", None),
            ("P01THMS", None),
            ("P0T1HMS", None),
            ("P0TH1MS", None),
            ("P0THM1S", None),
            ("P0THMS1", None),
            ("PT01HMS", None),
            ("PT0H1MS", None),
            ("PT0HM1S", None),
            ("PT0HMS1", None),
            ("PTH01MS", None),
            ("PTH0M1S", None),
            ("PTH0MS1", None),
            ("PTHM01S", None),
            ("PTHM0S1", None),
            ("PTHMS01", None),
            ("01PDTS", None),
            ("0P1DTS", None),
            ("0PD1TS", None),
            ("0PDT1S", None),
            ("0PDTS1", None),
            ("P01DTS", None),
            ("P0D1TS", None),
            ("P0DT1S", Some(TimeDelta::seconds(1))),
            ("P0DTS1", None),
            ("PD01TS", None),
            ("PD0T1S", None),
            ("PD0TS1", None),
            ("PDT01S", None),
            ("PDT0S1", None),
            ("PDTS01", None),
            ("01PDTM", None),
            ("0P1DTM", None),
            ("0PD1TM", None),
            ("0PDT1M", None),
            ("0PDTM1", None),
            ("P01DTM", None),
            ("P0D1TM", None),
            ("P0DT1M", Some(TimeDelta::minutes(1))),
            ("P0DTM1", None),
            ("PD01TM", None),
            ("PD0T1M", None),
            ("PD0TM1", None),
            ("PDT01M", None),
            ("PDT0M1", None),
            ("PDTM01", None),
            ("01PDTH", None),
            ("0P1DTH", None),
            ("0PD1TH", None),
            ("0PDT1H", None),
            ("0PDTH1", None),
            ("P01DTH", None),
            ("P0D1TH", None),
            ("P0DT1H", Some(TimeDelta::hours(1))),
            ("P0DTH1", None),
            ("PD01TH", None),
            ("PD0T1H", None),
            ("PD0TH1", None),
            ("PDT01H", None),
            ("PDT0H1", None),
            ("PDTH01", None),
            ("01PDTMS", None),
            ("0P1DTMS", None),
            ("0PD1TMS", None),
            ("0PDT1MS", None),
            ("0PDTM1S", None),
            ("0PDTMS1", None),
            ("P01DTMS", None),
            ("P0D1TMS", None),
            ("P0DT1MS", None),
            ("P0DTM1S", None),
            ("P0DTMS1", None),
            ("PD01TMS", None),
            ("PD0T1MS", None),
            ("PD0TM1S", None),
            ("PD0TMS1", None),
            ("PDT01MS", None),
            ("PDT0M1S", None),
            ("PDT0MS1", None),
            ("PDTM01S", None),
            ("PDTM0S1", None),
            ("PDTMS01", None),
            ("01PDTHS", None),
            ("0P1DTHS", None),
            ("0PD1THS", None),
            ("0PDT1HS", None),
            ("0PDTH1S", None),
            ("0PDTHS1", None),
            ("P01DTHS", None),
            ("P0D1THS", None),
            ("P0DT1HS", None),
            ("P0DTH1S", None),
            ("P0DTHS1", None),
            ("PD01THS", None),
            ("PD0T1HS", None),
            ("PD0TH1S", None),
            ("PD0THS1", None),
            ("PDT01HS", None),
            ("PDT0H1S", None),
            ("PDT0HS1", None),
            ("PDTH01S", None),
            ("PDTH0S1", None),
            ("PDTHS01", None),
            ("01PDTHM", None),
            ("0P1DTHM", None),
            ("0PD1THM", None),
            ("0PDT1HM", None),
            ("0PDTH1M", None),
            ("0PDTHM1", None),
            ("P01DTHM", None),
            ("P0D1THM", None),
            ("P0DT1HM", None),
            ("P0DTH1M", None),
            ("P0DTHM1", None),
            ("PD01THM", None),
            ("PD0T1HM", None),
            ("PD0TH1M", None),
            ("PD0THM1", None),
            ("PDT01HM", None),
            ("PDT0H1M", None),
            ("PDT0HM1", None),
            ("PDTH01M", None),
            ("PDTH0M1", None),
            ("PDTHM01", None),
            ("01PDTHMS", None),
            ("0P1DTHMS", None),
            ("0PD1THMS", None),
            ("0PDT1HMS", None),
            ("0PDTH1MS", None),
            ("0PDTHM1S", None),
            ("0PDTHMS1", None),
            ("P01DTHMS", None),
            ("P0D1THMS", None),
            ("P0DT1HMS", None),
            ("P0DTH1MS", None),
            ("P0DTHM1S", None),
            ("P0DTHMS1", None),
            ("PD01THMS", None),
            ("PD0T1HMS", None),
            ("PD0TH1MS", None),
            ("PD0THM1S", None),
            ("PD0THMS1", None),
            ("PDT01HMS", None),
            ("PDT0H1MS", None),
            ("PDT0HM1S", None),
            ("PDT0HMS1", None),
            ("PDTH01MS", None),
            ("PDTH0M1S", None),
            ("PDTH0MS1", None),
            ("PDTHM01S", None),
            ("PDTHM0S1", None),
            ("PDTHMS01", None),

            //base set with 1 and 0
            ("10PD", None),
            ("1P0D", None),
            ("1PD0", None),
            ("P10D", Some(TimeDelta::days(10))),
            ("P1D0", None),
            ("PD10", None),
            ("10PT", None),
            ("1P0T", None),
            ("1PT0", None),
            ("P10T", None),
            ("P1T0", None),
            ("PT10", None),
            ("10PTS", None),
            ("1P0TS", None),
            ("1PT0S", None),
            ("1PTS0", None),
            ("P10TS", None),
            ("P1T0S", None),
            ("P1TS0", None),
            ("PT10S", Some(TimeDelta::seconds(10))),
            ("PT1S0", None),
            ("PTS10", None),
            ("10PTM", None),
            ("1P0TM", None),
            ("1PT0M", None),
            ("1PTM0", None),
            ("P10TM", None),
            ("P1T0M", None),
            ("P1TM0", None),
            ("PT10M", Some(TimeDelta::minutes(10))),
            ("PT1M0", None),
            ("PTM10", None),
            ("10PTH", None),
            ("1P0TH", None),
            ("1PT0H", None),
            ("1PTH0", None),
            ("P10TH", None),
            ("P1T0H", None),
            ("P1TH0", None),
            ("PT10H", Some(TimeDelta::hours(10))),
            ("PT1H0", None),
            ("PTH10", None),
            ("10PDT", None),
            ("1P0DT", None),
            ("1PD0T", None),
            ("1PDT0", None),
            ("P10DT", None),
            ("P1D0T", None),
            ("P1DT0", None),
            ("PD10T", None),
            ("PD1T0", None),
            ("PDT10", None),
            ("10PTMS", None),
            ("1P0TMS", None),
            ("1PT0MS", None),
            ("1PTM0S", None),
            ("1PTMS0", None),
            ("P10TMS", None),
            ("P1T0MS", None),
            ("P1TM0S", None),
            ("P1TMS0", None),
            ("PT10MS", None),
            ("PT1M0S", Some(TimeDelta::minutes(1))),
            ("PT1MS0", None),
            ("PTM10S", None),
            ("PTM1S0", None),
            ("PTMS10", None),
            ("10PTHM", None),
            ("1P0THM", None),
            ("1PT0HM", None),
            ("1PTH0M", None),
            ("1PTHM0", None),
            ("P10THM", None),
            ("P1T0HM", None),
            ("P1TH0M", None),
            ("P1THM0", None),
            ("PT10HM", None),
            ("PT1H0M", Some(TimeDelta::hours(1))),
            ("PT1HM0", None),
            ("PTH10M", None),
            ("PTH1M0", None),
            ("PTHM10", None),
            ("10PTHS", None),
            ("1P0THS", None),
            ("1PT0HS", None),
            ("1PTH0S", None),
            ("1PTHS0", None),
            ("P10THS", None),
            ("P1T0HS", None),
            ("P1TH0S", None),
            ("P1THS0", None),
            ("PT10HS", None),
            ("PT1H0S", Some(TimeDelta::hours(1))),
            ("PT1HS0", None),
            ("PTH10S", None),
            ("PTH1S0", None),
            ("PTHS10", None),
            ("10PTHMS", None),
            ("1P0THMS", None),
            ("1PT0HMS", None),
            ("1PTH0MS", None),
            ("1PTHM0S", None),
            ("1PTHMS0", None),
            ("P10THMS", None),
            ("P1T0HMS", None),
            ("P1TH0MS", None),
            ("P1THM0S", None),
            ("P1THMS0", None),
            ("PT10HMS", None),
            ("PT1H0MS", None),
            ("PT1HM0S", None),
            ("PT1HMS0", None),
            ("PTH10MS", None),
            ("PTH1M0S", None),
            ("PTH1MS0", None),
            ("PTHM10S", None),
            ("PTHM1S0", None),
            ("PTHMS10", None),
            ("10PDTS", None),
            ("1P0DTS", None),
            ("1PD0TS", None),
            ("1PDT0S", None),
            ("1PDTS0", None),
            ("P10DTS", None),
            ("P1D0TS", None),
            ("P1DT0S", Some(TimeDelta::days(1))),
            ("P1DTS0", None),
            ("PD10TS", None),
            ("PD1T0S", None),
            ("PD1TS0", None),
            ("PDT10S", None),
            ("PDT1S0", None),
            ("PDTS10", None),
            ("10PDTM", None),
            ("1P0DTM", None),
            ("1PD0TM", None),
            ("1PDT0M", None),
            ("1PDTM0", None),
            ("P10DTM", None),
            ("P1D0TM", None),
            ("P1DT0M", Some(TimeDelta::days(1))),
            ("P1DTM0", None),
            ("PD10TM", None),
            ("PD1T0M", None),
            ("PD1TM0", None),
            ("PDT10M", None),
            ("PDT1M0", None),
            ("PDTM10", None),
            ("10PDTH", None),
            ("1P0DTH", None),
            ("1PD0TH", None),
            ("1PDT0H", None),
            ("1PDTH0", None),
            ("P10DTH", None),
            ("P1D0TH", None),
            ("P1DT0H", Some(TimeDelta::days(1))),
            ("P1DTH0", None),
            ("PD10TH", None),
            ("PD1T0H", None),
            ("PD1TH0", None),
            ("PDT10H", None),
            ("PDT1H0", None),
            ("PDTH10", None),
            ("10PDTMS", None),
            ("1P0DTMS", None),
            ("1PD0TMS", None),
            ("1PDT0MS", None),
            ("1PDTM0S", None),
            ("1PDTMS0", None),
            ("P10DTMS", None),
            ("P1D0TMS", None),
            ("P1DT0MS", None),
            ("P1DTM0S", None),
            ("P1DTMS0", None),
            ("PD10TMS", None),
            ("PD1T0MS", None),
            ("PD1TM0S", None),
            ("PD1TMS0", None),
            ("PDT10MS", None),
            ("PDT1M0S", None),
            ("PDT1MS0", None),
            ("PDTM10S", None),
            ("PDTM1S0", None),
            ("PDTMS10", None),
            ("10PDTHS", None),
            ("1P0DTHS", None),
            ("1PD0THS", None),
            ("1PDT0HS", None),
            ("1PDTH0S", None),
            ("1PDTHS0", None),
            ("P10DTHS", None),
            ("P1D0THS", None),
            ("P1DT0HS", None),
            ("P1DTH0S", None),
            ("P1DTHS0", None),
            ("PD10THS", None),
            ("PD1T0HS", None),
            ("PD1TH0S", None),
            ("PD1THS0", None),
            ("PDT10HS", None),
            ("PDT1H0S", None),
            ("PDT1HS0", None),
            ("PDTH10S", None),
            ("PDTH1S0", None),
            ("PDTHS10", None),
            ("10PDTHM", None),
            ("1P0DTHM", None),
            ("1PD0THM", None),
            ("1PDT0HM", None),
            ("1PDTH0M", None),
            ("1PDTHM0", None),
            ("P10DTHM", None),
            ("P1D0THM", None),
            ("P1DT0HM", None),
            ("P1DTH0M", None),
            ("P1DTHM0", None),
            ("PD10THM", None),
            ("PD1T0HM", None),
            ("PD1TH0M", None),
            ("PD1THM0", None),
            ("PDT10HM", None),
            ("PDT1H0M", None),
            ("PDT1HM0", None),
            ("PDTH10M", None),
            ("PDTH1M0", None),
            ("PDTHM10", None),
            ("10PDTHMS", None),
            ("1P0DTHMS", None),
            ("1PD0THMS", None),
            ("1PDT0HMS", None),
            ("1PDTH0MS", None),
            ("1PDTHM0S", None),
            ("1PDTHMS0", None),
            ("P10DTHMS", None),
            ("P1D0THMS", None),
            ("P1DT0HMS", None),
            ("P1DTH0MS", None),
            ("P1DTHM0S", None),
            ("P1DTHMS0", None),
            ("PD10THMS", None),
            ("PD1T0HMS", None),
            ("PD1TH0MS", None),
            ("PD1THM0S", None),
            ("PD1THMS0", None),
            ("PDT10HMS", None),
            ("PDT1H0MS", None),
            ("PDT1HM0S", None),
            ("PDT1HMS0", None),
            ("PDTH10MS", None),
            ("PDTH1M0S", None),
            ("PDTH1MS0", None),
            ("PDTHM10S", None),
            ("PDTHM1S0", None),
            ("PDTHMS10", None),

            //base set with 1 and 2
            ("12PD", None),
            ("1P2D", None),
            ("1PD2", None),
            ("P12D", Some(TimeDelta::days(12))),
            ("P1D2", None),
            ("PD12", None),
            ("12PT", None),
            ("1P2T", None),
            ("1PT2", None),
            ("P12T", None),
            ("P1T2", None),
            ("PT12", None),
            ("12PTS", None),
            ("1P2TS", None),
            ("1PT2S", None),
            ("1PTS2", None),
            ("P12TS", None),
            ("P1T2S", None),
            ("P1TS2", None),
            ("PT12S", Some(TimeDelta::seconds(12))),
            ("PT1S2", None),
            ("PTS12", None),
            ("12PTM", None),
            ("1P2TM", None),
            ("1PT2M", None),
            ("1PTM2", None),
            ("P12TM", None),
            ("P1T2M", None),
            ("P1TM2", None),
            ("PT12M", Some(TimeDelta::minutes(12))),
            ("PT1M2", None),
            ("PTM12", None),
            ("12PTH", None),
            ("1P2TH", None),
            ("1PT2H", None),
            ("1PTH2", None),
            ("P12TH", None),
            ("P1T2H", None),
            ("P1TH2", None),
            ("PT12H", Some(TimeDelta::hours(12))),
            ("PT1H2", None),
            ("PTH12", None),
            ("12PDT", None),
            ("1P2DT", None),
            ("1PD2T", None),
            ("1PDT2", None),
            ("P12DT", None),
            ("P1D2T", None),
            ("P1DT2", None),
            ("PD12T", None),
            ("PD1T2", None),
            ("PDT12", None),
            ("12PTMS", None),
            ("1P2TMS", None),
            ("1PT2MS", None),
            ("1PTM2S", None),
            ("1PTMS2", None),
            ("P12TMS", None),
            ("P1T2MS", None),
            ("P1TM2S", None),
            ("P1TMS2", None),
            ("PT12MS", None),
            ("PT1M2S", Some(TimeDelta::seconds(62))),
            ("PT1MS2", None),
            ("PTM12S", None),
            ("PTM1S2", None),
            ("PTMS12", None),
            ("12PTHM", None),
            ("1P2THM", None),
            ("1PT2HM", None),
            ("1PTH2M", None),
            ("1PTHM2", None),
            ("P12THM", None),
            ("P1T2HM", None),
            ("P1TH2M", None),
            ("P1THM2", None),
            ("PT12HM", None),
            ("PT1H2M", Some(TimeDelta::minutes(62))),
            ("PT1HM2", None),
            ("PTH12M", None),
            ("PTH1M2", None),
            ("PTHM12", None),
            ("12PTHS", None),
            ("1P2THS", None),
            ("1PT2HS", None),
            ("1PTH2S", None),
            ("1PTHS2", None),
            ("P12THS", None),
            ("P1T2HS", None),
            ("P1TH2S", None),
            ("P1THS2", None),
            ("PT12HS", None),
            ("PT1H2S", Some(TimeDelta::seconds(60*60+2))),
            ("PT1HS2", None),
            ("PTH12S", None),
            ("PTH1S2", None),
            ("PTHS12", None),
            ("12PTHMS", None),
            ("1P2THMS", None),
            ("1PT2HMS", None),
            ("1PTH2MS", None),
            ("1PTHM2S", None),
            ("1PTHMS2", None),
            ("P12THMS", None),
            ("P1T2HMS", None),
            ("P1TH2MS", None),
            ("P1THM2S", None),
            ("P1THMS2", None),
            ("PT12HMS", None),
            ("PT1H2MS", None),
            ("PT1HM2S", None),
            ("PT1HMS2", None),
            ("PTH12MS", None),
            ("PTH1M2S", None),
            ("PTH1MS2", None),
            ("PTHM12S", None),
            ("PTHM1S2", None),
            ("PTHMS12", None),
            ("12PDTS", None),
            ("1P2DTS", None),
            ("1PD2TS", None),
            ("1PDT2S", None),
            ("1PDTS2", None),
            ("P12DTS", None),
            ("P1D2TS", None),
            ("P1DT2S", Some(TimeDelta::seconds(24*60*60+2))),
            ("P1DTS2", None),
            ("PD12TS", None),
            ("PD1T2S", None),
            ("PD1TS2", None),
            ("PDT12S", None),
            ("PDT1S2", None),
            ("PDTS12", None),
            ("12PDTM", None),
            ("1P2DTM", None),
            ("1PD2TM", None),
            ("1PDT2M", None),
            ("1PDTM2", None),
            ("P12DTM", None),
            ("P1D2TM", None),
            ("P1DT2M", Some(TimeDelta::minutes(24*60+2))),
            ("P1DTM2", None),
            ("PD12TM", None),
            ("PD1T2M", None),
            ("PD1TM2", None),
            ("PDT12M", None),
            ("PDT1M2", None),
            ("PDTM12", None),
            ("12PDTH", None),
            ("1P2DTH", None),
            ("1PD2TH", None),
            ("1PDT2H", None),
            ("1PDTH2", None),
            ("P12DTH", None),
            ("P1D2TH", None),
            ("P1DT2H", Some(TimeDelta::hours(26))),
            ("P1DTH2", None),
            ("PD12TH", None),
            ("PD1T2H", None),
            ("PD1TH2", None),
            ("PDT12H", None),
            ("PDT1H2", None),
            ("PDTH12", None),
            ("12PDTMS", None),
            ("1P2DTMS", None),
            ("1PD2TMS", None),
            ("1PDT2MS", None),
            ("1PDTM2S", None),
            ("1PDTMS2", None),
            ("P12DTMS", None),
            ("P1D2TMS", None),
            ("P1DT2MS", None),
            ("P1DTM2S", None),
            ("P1DTMS2", None),
            ("PD12TMS", None),
            ("PD1T2MS", None),
            ("PD1TM2S", None),
            ("PD1TMS2", None),
            ("PDT12MS", None),
            ("PDT1M2S", None),
            ("PDT1MS2", None),
            ("PDTM12S", None),
            ("PDTM1S2", None),
            ("PDTMS12", None),
            ("12PDTHS", None),
            ("1P2DTHS", None),
            ("1PD2THS", None),
            ("1PDT2HS", None),
            ("1PDTH2S", None),
            ("1PDTHS2", None),
            ("P12DTHS", None),
            ("P1D2THS", None),
            ("P1DT2HS", None),
            ("P1DTH2S", None),
            ("P1DTHS2", None),
            ("PD12THS", None),
            ("PD1T2HS", None),
            ("PD1TH2S", None),
            ("PD1THS2", None),
            ("PDT12HS", None),
            ("PDT1H2S", None),
            ("PDT1HS2", None),
            ("PDTH12S", None),
            ("PDTH1S2", None),
            ("PDTHS12", None),
            ("12PDTHM", None),
            ("1P2DTHM", None),
            ("1PD2THM", None),
            ("1PDT2HM", None),
            ("1PDTH2M", None),
            ("1PDTHM2", None),
            ("P12DTHM", None),
            ("P1D2THM", None),
            ("P1DT2HM", None),
            ("P1DTH2M", None),
            ("P1DTHM2", None),
            ("PD12THM", None),
            ("PD1T2HM", None),
            ("PD1TH2M", None),
            ("PD1THM2", None),
            ("PDT12HM", None),
            ("PDT1H2M", None),
            ("PDT1HM2", None),
            ("PDTH12M", None),
            ("PDTH1M2", None),
            ("PDTHM12", None),
            ("12PDTHMS", None),
            ("1P2DTHMS", None),
            ("1PD2THMS", None),
            ("1PDT2HMS", None),
            ("1PDTH2MS", None),
            ("1PDTHM2S", None),
            ("1PDTHMS2", None),
            ("P12DTHMS", None),
            ("P1D2THMS", None),
            ("P1DT2HMS", None),
            ("P1DTH2MS", None),
            ("P1DTHM2S", None),
            ("P1DTHMS2", None),
            ("PD12THMS", None),
            ("PD1T2HMS", None),
            ("PD1TH2MS", None),
            ("PD1THM2S", None),
            ("PD1THMS2", None),
            ("PDT12HMS", None),
            ("PDT1H2MS", None),
            ("PDT1HM2S", None),
            ("PDT1HMS2", None),
            ("PDTH12MS", None),
            ("PDTH1M2S", None),
            ("PDTH1MS2", None),
            ("PDTHM12S", None),
            ("PDTHM1S2", None),
            ("PDTHMS12", None),

            //reduced set with 1, 2, 3 (those with fewer places excluded)
            ("1P2T3S", None),
            ("1P2TS3", None),
            ("1PT2S3", None),
            ("P1T2S3", None),
            ("1P2T3S", None),
            ("1P2TS3", None),
            ("1PT2S3", None),
            ("P1T2S3", None),
            ("1P2T3M", None),
            ("1P2TM3", None),
            ("1PT2M3", None),
            ("P1T2M3", None),
            ("1P2T3H", None),
            ("1P2TH3", None),
            ("1PT2H3", None),
            ("P1T2H2", None),
            ("1P2D3T", None),
            ("1P2DT3", None),
            ("1PD2T3", None),
            ("P1D2T3", None),
            ("1P2T3MS", None),
            ("1P2TM3S", None),
            ("1P2TMS3", None),
            ("1PT2M3S", None),
            ("1PT2MS3", None),
            ("1PTM2S3", None),
            ("P1T2M3S", None),
            ("P1T2MS3", None),
            ("P1TM2S3", None),
            ("PT1M2S3", None),
            ("1P2T3HM", None),
            ("1P2TH3M", None),
            ("1P2THM3", None),
            ("1PT2H3M", None),
            ("1PT2HM3", None),
            ("1PTH2M3", None),
            ("P1T2H3M", None),
            ("P1T2HM3", None),
            ("P1TH2M3", None),
            ("PT1H2M3", None),
            ("1P2T3HS", None),
            ("1P2TH3S", None),
            ("1P2THS3", None),
            ("1PT2H3S", None),
            ("1PT2HS3", None),
            ("1PTH2S3", None),
            ("P1T2H3S", None),
            ("P1TH2S3", None),
            ("PT1H2S3", None),
            ("1P2T3HMS", None),
            ("1P2TH3MS", None),
            ("1P2THM3S", None),
            ("1P2THMS3", None),
            ("1PT2H3MS", None),
            ("1PT2HM3S", None),
            ("1PT2HMS3", None),
            ("1PTH2M3S", None),
            ("1PTH2MS3", None),
            ("1PTHM2S3", None),
            ("P1T2H3MS", None),
            ("P1T2HM3S", None),
            ("P1T2HMS3", None),
            ("P1TH2M3S", None),
            ("P1TH2MS3", None),
            ("P1THM2S3", None),
            ("PT1H2M3S", Some(TimeDelta::seconds(62*60+3))),
            ("PT1H2MS3", None),
            ("PT1HM2S3", None),
            ("PTH1M2S3", None),
            ("1P2D3TS", None),
            ("1P2DT3S", None),
            ("1P2DTS3", None),
            ("1PD2T3S", None),
            ("1PD2TS3", None),
            ("1PDT2S3", None),
            ("P1D2T3S", None),
            ("P1D2TS3", None),
            ("P1DT2S3", None),
            ("PD1T2S3", None),
            ("1P2D3TM", None),
            ("1P2DT3M", None),
            ("1P2DTM3", None),
            ("1PD2T3M", None),
            ("1PD2TM3", None),
            ("1PDT2M3", None),
            ("P1D2T3M", None),
            ("P1D2TM3", None),
            ("P1DT2M3", None),
            ("PD1T2M3", None),
            ("1P2D3TH", None),
            ("1P2DT3H", None),
            ("1P2DTH3", None),
            ("1PD2T3H", None),
            ("1PD2TH3", None),
            ("1PDT2H3", None),
            ("P1D2T3H", None),
            ("P1D2TH3", None),
            ("P1DT2H3", None),
            ("PD1T2H3", None),
            ("1P2D3TMS", None),
            ("1P2DT3MS", None),
            ("1P2DTM3S", None),
            ("1P2DTMS3", None),
            ("1PD2T3MS", None),
            ("1PD2TM3S", None),
            ("1PD2TMS3", None),
            ("1PDT2M3S", None),
            ("1PDT2MS3", None),
            ("1PDTM2S3", None),
            ("P1D2T3MS", None),
            ("P1D2TM3S", None),
            ("P1D2TMS3", None),
            ("P1DT2M3S", Some(TimeDelta::seconds((24*60+2)*60+3))),
            ("P1DT2MS3", None),
            ("P1DTM2S3", None),
            ("PD1T2M3S", None),
            ("PD1T2MS3", None),
            ("PD1TM2S2", None),
            ("PDT1M2S2", None),
            ("1P2D3THS", None),
            ("1P2DT3HS", None),
            ("1P2DTH3S", None),
            ("1P2DTHS3", None),
            ("1PD2T3HS", None),
            ("1PD2TH3S", None),
            ("1PD2THS3", None),
            ("1PDT2H3S", None),
            ("1PDT2HS3", None),
            ("1PDTH2S3", None),
            ("P1D2T3HS", None),
            ("P1D2TH3S", None),
            ("P1D2THS3", None),
            ("P1DT2H3S", Some(TimeDelta::seconds(26*60*60+3))),
            ("P1DT2HS3", None),
            ("P1DTH2S3", None),
            ("PD1T2H3S", None),
            ("PD1T2HS3", None),
            ("PD1TH2S3", None),
            ("PDT1H2S3", None),
            ("1P2D3THM", None),
            ("1P2DT3HM", None),
            ("1P2DTH3M", None),
            ("1P2DTHM3", None),
            ("1PD2T3HM", None),
            ("1PD2TH3M", None),
            ("1PD2THM3", None),
            ("1PDT2H3M", None),
            ("1PDT2HM3", None),
            ("1PDTH2M3", None),
            ("P1D2T3HM", None),
            ("P1D2TH3M", None),
            ("P1D2THM3", None),
            ("P1DT2H3M", Some(TimeDelta::minutes(26*60+3))),
            ("P1DT2HM3", None),
            ("P1DTH2M3", None),
            ("PD1T2H3M", None),
            ("PD1T2HM3", None),
            ("PD1TH2M3", None),
            ("PDT1H2M3", None),
            ("1P2D3THMS", None),
            ("1P2DT3HMS", None),
            ("1P2DTH3MS", None),
            ("1P2DTHM3S", None),
            ("1P2DTHMS3", None),
            ("1PD2T3HMS", None),
            ("1PD2TH3MS", None),
            ("1PD2THM3S", None),
            ("1PD2THMS3", None),
            ("1PDT2H3MS", None),
            ("1PDT2HM3S", None),
            ("1PDT2HMS3", None),
            ("1PDTH2M3S", None),
            ("1PDTH2MS3", None),
            ("1PDTHM2S3", None),
            ("P1D2T3HMS", None),
            ("P1D2TH3MS", None),
            ("P1D2THM3S", None),
            ("P1D2THMS3", None),
            ("P1DT2H3MS", None),
            ("P1DT2HM3S", None),
            ("P1DT2HMS3", None),
            ("P1DTH2M3S", None),
            ("P1DTH2MS3", None),
            ("P1DTHM2S3", None),
            ("PD1T2H3MS", None),
            ("PD1T2HM3S", None),
            ("PD1T2HMS3", None),
            ("PD1TH2M3S", None),
            ("PD1TH2MS3", None),
            ("PD1THM2S3", None),
            ("PDT1H2M3S", None),
            ("PDT1H2MS3", None),
            ("PDT1HM2S3", None),
            ("PDTH1M2S3", None),

            //reduced set with 1, 2, 3, 4
            ("1P2T3M4S", None),
            ("1P2T3MS4", None),
            ("1P2TM3S4", None),
            ("1PT2M3S4", None),
            ("P1T2M3S4", None),
            ("1P2T3H4M", None),
            ("1P2T3HM4", None),
            ("1P2TH3M4", None),
            ("1PT2H3M4", None),
            ("P1T2H3M4", None),
            ("1P2T3H4S", None),
            ("1P2T3HS4", None),
            ("1P2TH3S4", None),
            ("1PT2H3S4", None),
            ("P1T2H3S4", None),
            ("1P2T3H4MS", None),
            ("1P2T3HM4S", None),
            ("1P2T3HMS4", None),
            ("1P2TH3M4S", None),
            ("1P2TH3MS4", None),
            ("1P2THM3S4", None),
            ("1PT2H3M4S", None),
            ("1PT2H3MS4", None),
            ("1PT2HM3S4", None),
            ("1PTH2M3S4", None),
            ("P1T2H3M4S", None),
            ("P1T2H3MS4", None),
            ("P1T2HM3S4", None),
            ("P1TH2M3S4", None),
            ("PT1H2M3S4", None),
            ("1P2D3T4S", None),
            ("1P2D3TS4", None),
            ("1P2DT3S4", None),
            ("1PD2T3S4", None),
            ("P1D2T3S4", None),
            ("1P2D3T4M", None),
            ("1P2D3TM4", None),
            ("1P2DT3M4", None),
            ("1PD2T3M4", None),
            ("P1D2T3M4", None),
            ("1P2D3T4H", None),
            ("1P2D3TH4", None),
            ("1P2DT3H4", None),
            ("1PD2T3H4", None),
            ("P1D2T3H4", None),
            ("1P2D3T4MS", None),
            ("1P2D3TM4S", None),
            ("1P2D3TMS4", None),
            ("1P2DT3M4S", None),
            ("1P2DT3MS4", None),
            ("1P2DTM3S4", None),
            ("1PD2T3M4S", None),
            ("1PD2T3MS4", None),
            ("1PD2TM3S4", None),
            ("1PDT2M3S4", None),
            ("P1D2T3M4S", None),
            ("P1D2T3MS4", None),
            ("P1D2TM3S4", None),
            ("P1DT2M3S4", None),
            ("PD1T2M3S4", None),
            ("1P2D3T4HS", None),
            ("1P2D3TH4S", None),
            ("1P2D3THS4", None),
            ("1P2DT3H4S", None),
            ("1P2DT3HS4", None),
            ("1P2DTH3S4", None),
            ("1PD2T3H4S", None),
            ("1PD2T3HS4", None),
            ("1PD2TH3S4", None),
            ("1PDT2H3S4", None),
            ("P1D2T3H4S", None),
            ("P1D2T3HS4", None),
            ("P1D2TH3S4", None),
            ("P1DT2H3S4", None),
            ("PD1T2H3S4", None),
            ("1P2D3T4HM", None),
            ("1P2D3TH4M", None),
            ("1P2D3THM4", None),
            ("1P2DT3H4M", None),
            ("1P2DT3HM4", None),
            ("1P2DTH3M4", None),
            ("1PD2T3H4M", None),
            ("1PD2T3HM4", None),
            ("1PD2TH3M4", None),
            ("1PDT2H3M4", None),
            ("P1D2T3H4M", None),
            ("P1D2T3HM4", None),
            ("P1D2TH3M4", None),
            ("P1DT2H3M4", None),
            ("PD1T2H3M4", None),
            ("1P2D3T4HMS", None),
            ("1P2D3TH4MS", None),
            ("1P2D3THM4S", None),
            ("1P2D3THMS4", None),
            ("1P2DT3H4MS", None),
            ("1P2DT3HM4S", None),
            ("1P2D3THMS4", None),
            ("1P2DT3H4MS", None),
            ("1P2DT3HM4S", None),
            ("1P2DT3HMS4", None),
            ("1P2DTH3M4S", None),
            ("1P2DTH3MS4", None),
            ("1P2DTHM3S4", None),
            ("1PD2T3H4MS", None),
            ("1PD2T3HM4S", None),
            ("1PD2T3HMS4", None),
            ("1PD2TH3M4S", None),
            ("1PD2TH3MS4", None),
            ("1PD2THM3S4", None),
            ("1PDT2H3M4S", None),
            ("1PDT2H3MS4", None),
            ("1PDT2HM3S4", None),
            ("1PDTH2M3S4", None),
            ("P1D2T3H4MS", None),
            ("P1D2T3HM4S", None),
            ("P1D2T3HMS4", None),
            ("P1D2TH3M4S", None),
            ("P1D2TH3MS4", None),
            ("P1D2THM3S4", None),
            ("P1DT2H3M4S", Some(TimeDelta::seconds((26*60+3)*60+4))),
            ("P1DT2H3MS4", None),
            ("P1DT2HM3S4", None),
            ("P1DTH2M3S4", None),
            ("PD1T2H3M4S", None),
            ("PD1T2H3MS4", None),
            ("PD1T2HM3S4", None),
            ("PD1TH2M3S4", None),
            ("PDT1H2M3S4", None),

            //reduced set with 1, 2, 3, 4, 5
            ("1P2T3H4M5S", None),
            ("1P2T3H4MS5", None),
            ("1P2T3HM4S5", None),
            ("1P2TH3M4S5", None),
            ("1PT2H3M4S5", None),
            ("P1T2H3M4S5", None),
            ("1P2D3T4M5S", None),
            ("1P2D3T4MS5", None),
            ("1P2D3TM4S5", None),
            ("1P2DT3M4S5", None),
            ("1PD2T3M4S5", None),
            ("P1D2T3M4S5", None),
            ("1P2D3T4H5S", None),
            ("1P2D3T4HS5", None),
            ("1P2D3TH4S5", None),
            ("1P2DT3H4S5", None),
            ("1PD2T3H4S5", None),
            ("P1D2T3H4S5", None),
            ("1P2D3T4H5M", None),
            ("1P2D3T4HM5", None),
            ("1P2D3TH4M5", None),
            ("1P2DT3H4M5", None),
            ("1PD2T3H4M5", None),
            ("P1D2T3H4M5", None),
            ("1P2D3T4H5MS", None),
            ("1P2D3T4HM5S", None),
            ("1P2D3T4HMS5", None),
            ("1P2D3TH4M5S", None),
            ("1P2D3TH4MS5", None),
            ("1P2D3THM4S5", None),
            ("1P2DT3H4M5S", None),
            ("1P2DT3H4MS5", None),
            ("1P2DT3HM4S5", None),
            ("1P2DTH3M4S5", None),
            ("1PD2T3H4M5S", None),
            ("1PD2T3H4MS5", None),
            ("1PD2T3HM4S5", None),
            ("1PD2TH3M4S5", None),
            ("1PDT2H3M4S5", None),
            ("P1D2T3H4M5S", None),
            ("P1D2T3H4MS5", None),
            ("P1D2T3HM4S5", None),
            ("P1D2TH3M4S5", None),
            ("P1DT2H3M4S5", None),
            ("PD1T2H3M4S5", None),

            //base set with values, one 23
            ("P23D", Some(TimeDelta::days(23))),
            ("PT23S", Some(TimeDelta::seconds(23))),
            ("PT23M", Some(TimeDelta::minutes(23))),
            ("PT23H", Some(TimeDelta::hours(23))),
            ("P23DT", None),
            ("PT11M23S", Some(TimeDelta::seconds(11*60+23))),
            ("PT23M11S", Some(TimeDelta::seconds(23*60+11))),
            ("PT11H23M", Some(TimeDelta::minutes(11*60+23))),
            ("PT23H11M", Some(TimeDelta::minutes(23*60+11))),
            ("PT11H23S", Some(TimeDelta::seconds(11*60*60+23))),
            ("PT23H11S", Some(TimeDelta::seconds(23*60*60+11))),
            ("PT11H22M23S", Some(TimeDelta::seconds((11*60+22)*60+23))),
            ("PT11H23M22S", Some(TimeDelta::seconds((11*60+23)*60+22))),
            ("PT23H11M22S", Some(TimeDelta::seconds((23*60+11)*60+22))),
            ("P11DT23S", Some(TimeDelta::seconds(11*24*60*60+23))),
            ("P23DT11S", Some(TimeDelta::seconds(23*24*60*60+11))),
            ("P11DT23M", Some(TimeDelta::minutes(11*24*60+23))),
            ("P23DT11M", Some(TimeDelta::minutes(23*24*60+11))),
            ("P11DT23H", Some(TimeDelta::hours(11*24+23))),
            ("P23DT11H", Some(TimeDelta::hours(23*24+11))),
            ("P11DT22M23S", Some(TimeDelta::seconds((11*24*60+22)*60+23))),
            ("P11DT23M22S", Some(TimeDelta::seconds((11*24*60+23)*60+22))),
            ("P23DT11M22S", Some(TimeDelta::seconds((23*24*60+11)*60+22))),
            ("P11DT22H23S", Some(TimeDelta::seconds((11*24+22)*60*60+23))),
            ("P11DT23H22S", Some(TimeDelta::seconds((11*24+23)*60*60+22))),
            ("P23DT11H22S", Some(TimeDelta::seconds((23*24+11)*60*60+22))),
            ("P11DT22H23M", Some(TimeDelta::minutes((11*24+22)*60+23))),
            ("P11DT23H22M", Some(TimeDelta::minutes((11*24+23)*60+22))),
            ("P23DT11H22M", Some(TimeDelta::minutes((23*24+11)*60+22))),
            ("P11DT22H33M23S", Some(TimeDelta::seconds(((11*24+22)*60+33)*60+23))),
            ("P11DT22H23M33S", Some(TimeDelta::seconds(((11*24+22)*60+23)*60+33))),
            ("P11DT23H22M33S", Some(TimeDelta::seconds(((11*24+23)*60+22)*60+33))),
            ("P23DT11H22M33S", Some(TimeDelta::seconds(((23*24+11)*60+22)*60+33))),

            //base set with values, one 24
            ("P24D", Some(TimeDelta::days(24))),
            ("PT24S", Some(TimeDelta::seconds(24))),
            ("PT24M", Some(TimeDelta::minutes(24))),
            ("PT24H", None),
            ("P24DT", None),
            ("PT11M24S", Some(TimeDelta::seconds(11*60+24))),
            ("PT24M11S", Some(TimeDelta::seconds(24*60+11))),
            ("PT11H24M", Some(TimeDelta::minutes(11*60+24))),
            ("PT24H11M", None),
            ("PT11H24S", Some(TimeDelta::seconds(11*60*60+24))),
            ("PT24H11S", None),
            ("PT11H22M24S", Some(TimeDelta::seconds((11*60+22)*60+24))),
            ("PT11H24M22S", Some(TimeDelta::seconds((11*60+24)*60+22))),
            ("PT24H11M22S", None),
            ("P11DT24S", Some(TimeDelta::seconds(11*24*60*60+24))),
            ("P24DT11S", Some(TimeDelta::seconds(24*24*60*60+11))),
            ("P11DT24M", Some(TimeDelta::minutes(11*24*60+24))),
            ("P24DT11M", Some(TimeDelta::minutes(24*24*60+11))),
            ("P11DT24H", None),
            ("P24DT11H", Some(TimeDelta::hours(24*24+11))),
            ("P11DT22M24S", Some(TimeDelta::seconds((11*24*60+22)*60+24))),
            ("P11DT24M22S", Some(TimeDelta::seconds((11*24*60+24)*60+22))),
            ("P24DT11M22S", Some(TimeDelta::seconds((24*24*60+11)*60+22))),
            ("P11DT22H24S", Some(TimeDelta::seconds((11*24+22)*60*60+24))),
            ("P11DT24H22S", None),
            ("P24DT11H22S", Some(TimeDelta::seconds((24*24+11)*60*60+22))),
            ("P11DT22H24M", Some(TimeDelta::minutes((11*24+22)*60+24))),
            ("P11DT24H22M", None),
            ("P24DT11H22M", Some(TimeDelta::minutes((24*24+11)*60+22))),
            ("P11DT22H33M24S", Some(TimeDelta::seconds(((11*24+22)*60+33)*60+24))),
            ("P11DT22H24M33S", Some(TimeDelta::seconds(((11*24+22)*60+24)*60+33))),
            ("P11DT24H22M33S", None),
            ("P24DT11H22M33S", Some(TimeDelta::seconds(((24*24+11)*60+22)*60+33))),

            //base set with values, one 59
            ("P59D", Some(TimeDelta::days(59))),
            ("PT59S", Some(TimeDelta::seconds(59))),
            ("PT59M", Some(TimeDelta::minutes(59))),
            ("PT59H", None),
            ("P59DT", None),
            ("PT11M59S", Some(TimeDelta::seconds(11*60+59))),
            ("PT59M11S", Some(TimeDelta::seconds(59*60+11))),
            ("PT11H59M", Some(TimeDelta::minutes(11*60+59))),
            ("PT59H11M", None),
            ("PT11H59S", Some(TimeDelta::seconds(11*60*60+59))),
            ("PT59H11S", None),
            ("PT11H22M59S", Some(TimeDelta::seconds((11*60+22)*60+59))),
            ("PT11H59M22S", Some(TimeDelta::seconds((11*60+59)*60+22))),
            ("PT59H11M22S", None),
            ("P11DT59S", Some(TimeDelta::seconds(11*24*60*60+59))),
            ("P59DT11S", Some(TimeDelta::seconds(59*24*60*60+11))),
            ("P11DT59M", Some(TimeDelta::minutes(11*24*60+59))),
            ("P59DT11M", Some(TimeDelta::minutes(59*24*60+11))),
            ("P11DT59H", None),
            ("P59DT11H", Some(TimeDelta::hours(59*24+11))),
            ("P11DT22M59S", Some(TimeDelta::seconds((11*24*60+22)*60+59))),
            ("P11DT59M22S", Some(TimeDelta::seconds((11*24*60+59)*60+22))),
            ("P59DT11M22S", Some(TimeDelta::seconds((59*24*60+11)*60+22))),
            ("P11DT22H59S", Some(TimeDelta::seconds((11*24+22)*60*60+59))),
            ("P11DT59H22S", None),
            ("P59DT11H22S", Some(TimeDelta::seconds((59*24+11)*60*60+22))),
            ("P11DT22H59M", Some(TimeDelta::minutes((11*24+22)*60+59))),
            ("P11DT59H22M", None),
            ("P59DT11H22M", Some(TimeDelta::minutes((59*24+11)*60+22))),
            ("P11DT22H33M59S", Some(TimeDelta::seconds(((11*24+22)*60+33)*60+59))),
            ("P11DT22H59M33S", Some(TimeDelta::seconds(((11*24+22)*60+59)*60+33))),
            ("P11DT59H22M33S", None),
            ("P59DT11H22M33S", Some(TimeDelta::seconds(((59*24+11)*60+22)*60+33))),

            //base set with values, one 60
            ("P60D", Some(TimeDelta::days(60))),
            ("PT60S", None),
            ("PT60M", None),
            ("PT60H", None),
            ("P60DT", None),
            ("PT11M60S", None),
            ("PT60M11S", None),
            ("PT11H60M", None),
            ("PT60H11M", None),
            ("PT11H60S", None),
            ("PT60H11S", None),
            ("PT11H22M60S", None),
            ("PT11H60M22S", None),
            ("PT60H11M22S", None),
            ("P11DT60S", None),
            ("P60DT11S", Some(TimeDelta::seconds(60*24*60*60+11))),
            ("P11DT60M", None),
            ("P60DT11M", Some(TimeDelta::minutes(60*24*60+11))),
            ("P11DT60H", None),
            ("P60DT11H", Some(TimeDelta::hours(60*24+11))),
            ("P11DT22M60S", None),
            ("P11DT60M22S", None),
            ("P60DT11M22S", Some(TimeDelta::seconds((60*24*60+11)*60+22))),
            ("P11DT22H60S", None),
            ("P11DT60H22S", None),
            ("P60DT11H22S", Some(TimeDelta::seconds((60*24+11)*60*60+22))),
            ("P11DT22H60M", None),
            ("P11DT60H22M", None),
            ("P60DT11H22M", Some(TimeDelta::minutes((60*24+11)*60+22))),
            ("P11DT22H33M60S", None),
            ("P11DT22H60M33S", None),
            ("P11DT60H22M33S", None),
            ("P60DT11H22M33S", Some(TimeDelta::seconds(((60*24+11)*60+22)*60+33))),

            //extended set with values
            ("11", None),
            ("11P", None),
            ("11S", None),
            ("P11T", None),
            ("P11D", Some(TimeDelta::days(11))),
            ("P11S", None),
            ("11DT", None),
            ("T11S", None),
            ("PT11S", Some(TimeDelta::seconds(11))),
            ("PT11M", Some(TimeDelta::minutes(11))),
            ("PT11H", Some(TimeDelta::hours(11))),
            ("PT11D", None),
            ("P11ST", None),
            ("P11DT", None),
            ("PT11M22S", Some(TimeDelta::seconds(11*60+22))),
            ("PT11S22M", None),
            ("PT11H22M", Some(TimeDelta::minutes(11*60+22))),
            ("PT11M22H", None),
            ("PT11H22S", Some(TimeDelta::seconds(11*60*60+22))),
            ("PT11S22H", None),
            ("PT11S22S", None),
            ("PT11M22M", None),
            ("PT11H22H", None),
            ("PT11H22M33S", Some(TimeDelta::seconds((11*60+22)*60+33))),
            ("PT11H22S33M", None),
            ("PT11M22H33S", None),
            ("PT11M22S33H", None),
            ("PT11S22H33M", None),
            ("PT11S22M33H", None),
            ("PT11H22H33S", None),
            ("PT11H22H33M", None),
            ("PT11H22M33M", None),
            ("PT11M22M33S", None),
            ("PT11H22S33S", None),
            ("PT11M22S33S", None),
            ("P11DT22S", Some(TimeDelta::seconds(11*24*60*60+22))),
            ("P11DT22M", Some(TimeDelta::minutes(11*24*60+22))),
            ("P11DT22H", Some(TimeDelta::hours(11*24+22))),
            ("P11DT22D", None),
            ("P11ST22D", None),
            ("P11ST22H", None),
            ("P11ST11S", None),
            ("P11DT22M33S", Some(TimeDelta::seconds((11*24*60+22)*60+33))),
            ("P11DT22S33M", None),
            ("P11DT22H33S", Some(TimeDelta::seconds((11*24+22)*60*60+33))),
            ("P11DT22S33H", None),
            ("P11DT22H33M", Some(TimeDelta::minutes((11*24+22)*60+33))),
            ("P11DT22M33H", None),
            ("P11DT22H33H", None),
            ("P11DT22D33H", None),
            ("P11DT22H33D", None),
            ("P11ST22D33H", None),
            ("P11ST22H33D", None),
            ("P11ST22H33M", None),
            ("P11DT22H33M44S", Some(TimeDelta::seconds(((11*24+22)*60+33)*60+44))),
            ("P11DT22H33S44M", None),
            ("P11DT33M22H44S", None),
            ("P11DT33M44S22H", None),
            ("P11DT44S22H33M", None),
            ("P11DT44S33M22H", None),
            ("P11DT44D22H33M", None),
            ("P11DT22H23H33S", None),
            ("P11ST33D22H44M", None),
            ("P11ST22H33M44S", None),
            ("P11DT22H33M44S55S", None),
            ("P11DT22H33M44S23H", None),
            ("P11DT22H33M44S55D", None),
            ("P11DT33S22H44M55S", None),
            ("P11DT22H23H33M44S", None),
            ("P11DT33D22H44M55S", None),
            ("P11D22DT23H33M44S", None),
            ("P11D22ST23H33M44S", None),
            ("P11S22DT23H33M44S", None),
        ];

        for (p, r) in tests {
            assert_eq!(parse_delta(p), r, "pattern=\"{}\"", p);
        }

        //Changing anything to 'A' or ' ' should fail
        for (p, _) in tests {
            for i in 0..p.len() {
                let mut s = p.to_string();
                s.replace_range(i..i+1, "A");
                assert_eq!(parse_delta(&s), None, "pattern=\"{}\"", s);
                s.replace_range(i..i+1, " ");
                assert_eq!(parse_delta(&s), None, "pattern=\"{}\"", s);
            }
        }

        //Inserting 'A' or ' ' should fail
        for (p, _) in tests {
            for i in 0..p.len() {
                let mut s = p.to_string();
                s.insert(i, 'A');
                assert_eq!(parse_delta(&s), None, "pattern=\"{}\"", s);
                s.replace_range(i..i+1, " ");
                assert_eq!(parse_delta(&s), None, "pattern=\"{}\"", s);
            }
        }

        //Changing any character to lowercase should fail
        for (p, _) in tests {
            for (i, c) in p.char_indices() {
                let mut s = String::from(p);
                if c.is_ascii_alphabetic() {
                    s.replace_range(i..i+1, c.to_ascii_lowercase().to_string().as_str());
                    assert_eq!(parse_delta(&s), None, "pattern=\"{}\"", s);
                }
            }
        }
    }
}
